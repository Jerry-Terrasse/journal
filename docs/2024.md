## Journal-2024

record my journey in CS, gain from history, sometimes scandal.

### 12.20

#### å®‰å“ç†„å±ä¸é”å±

æœ‰æ—¶éœ€è¦ä¿æŒå®‰å“æ‰‹æœºé•¿æœŸå”¤é†’çŠ¶æ€ï¼Œä½†åˆä¸å¸Œæœ›å±å¹•å¼€ç€è´¹ç”µæˆ–è€…å‘ç”Ÿçƒ§å±ï¼Œå¯ä»¥å…³é—­å±å¹•æ˜¾ç¤ºï¼ˆéœ€è¦ROOTï¼‰ï¼š

```shell
adb shell "su -c 'echo 0 > /sys/class/leds/lcd-backlight/brightness'" # å…³é—­å±å¹•
adb shell "su -c 'echo 1 > /sys/class/leds/lcd-backlight/brightness'" # å¼€å¯å±å¹•ï¼ˆè®¾ç½®äº®åº¦ä¸º1ï¼‰
```

#### æ›´æ–°å†…æ ¸åä¸é‡å¯å¯¼è‡´çš„é—®é¢˜

æŒ‚è½½smbæ–‡ä»¶ç³»ç»Ÿæ—¶å‡ºç°`mount error: cifs filesystem not supported by the system`ï¼Œæ˜¯ç”±äºæ›´æ–°å†…æ ¸åï¼Œå†…æ ¸æ¨¡å—çš„è·¯å¾„æ”¹å˜äº†ï¼Œä½¿å¾—æ–°å®‰è£…çš„æ¨¡å—æ— æ³•è¢«å½“å‰è¿è¡Œçš„æ—§å†…æ ¸æ‰¾åˆ°ã€‚

[ref](https://forum.manjaro.org/t/mounting-a-nas-using-systemd-mount-error-cifs-filesystem-not-supported-by-the-system/119153)

### 12.18

#### Typoraå¼ºåˆ¶åˆ†é¡µ

åœ¨éœ€è¦åˆ†é¡µçš„åœ°æ–¹æ’å…¥å¦‚ä¸‹å†…å®¹ï¼š

```html
<div style="page-break-after: always;"></div>
```

ï¼ˆå¯¼å‡ºä¸ºPDFæ—¶ç”Ÿæ•ˆï¼‰

### 12.17

### tmuxå¯¼å‡ºçª—å£å†…å®¹

`ctrl+b + :`å¯è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼Œå…ˆä½¿ç”¨`capture-pane -S -`å‘½ä»¤å°†çª—å£å†…å®¹æ•è·åˆ°ç¼“å†²åŒºï¼Œå†ä½¿ç”¨`save-buffer /path/to/savefile.txt`å°†ç¼“å†²åŒºå†…å®¹ä¿å­˜åˆ°æ–‡ä»¶ã€‚

### 12.16

#### btmæŒ‰æ¥å£è¿‡æ»¤ç½‘ç»œæµé‡

`~/.config/bottom/bottom.toml`:

```toml
[net_filter]
is_list_ignored = false # falseä¸ºæ­£å‘é€‰æ‹©listä¸­çš„æ¥å£ï¼Œtrueä¸ºåå‘è¿‡æ»¤æ‰listä¸­çš„æ¥å£
#list = ["virbr0.*"]
list = ["eno1"]
regex = true
case_sensitive = false
whole_word = false
```

### 12.12

#### åˆ†æFirefoxè¿›ç¨‹èµ„æº

åœ°å€æ è¾“å…¥`about:processes`

### 12.11

#### rimeç¦ç”¨shiftåˆ‡æ¢ä¸­è‹±

`.config/fcitx/rime/default.custom.yaml`:

```yaml
ascii_composer:
  switch_key:
    Shift_L: noop
    Shift_R: noop
```

### 12.9

#### Clash Verge é“¾å¼ä»£ç†

ä¸ºéœ€è¦è¢«é“¾å¼ä»£ç†çš„èŠ‚ç‚¹æ·»åŠ `dialer-proxy`å³å¯ï¼Œå…¶å€¼å¯ä»¥æ˜¯ä»£ç†/ä»£ç†ç»„çš„name [ref](https://wiki.metacubex.one/config/proxies/dialer-proxy/)

```yaml
proxies:
- name: "ss1"
  dialer-proxy: dialer
  ...

- name: "ss2"
  ...

proxy-groups:
- name: dialer
  type: select
  proxies:
  - ss2
```

ä½¿ç”¨Clash Vergeæ‹“å±•è„šæœ¬æ‰¹é‡æ·»åŠ dialerï¼š

```javascript
function main(config, profileName) {
  config.proxies = config.proxies.map(proxy => {
    if (proxy.name && proxy.name !== 'dialer_name') {
      proxy['dialer-proxy'] = 'dialer_name';
    }
    return proxy;
  });
  return config;
}
```

### 12.8

#### dockeræ›´æ–°å®¹å™¨restartç­–ç•¥

```shell
docker update --restart=always <name>
```

### 12.3

#### è°ƒè¯•Firefoxè‡ªèº«UI

[ref](https://superuser.com/questions/1608096/how-to-inspect-firefoxs-ui)

#### Firefoxéšè—æ ‡ç­¾æ 

ä½¿ç”¨æ ‘å½¢æ ‡ç­¾é¡µåï¼Œä¼ ç»Ÿæ ‡ç­¾é¡µæ²¡æœ‰å¿…è¦ä¸€ç›´æ˜¾ç¤ºï¼Œé€šè¿‡è‡ªå®šä¹‰csséšè—ï¼š

[MrOtherGuy/firefox-csshacks](https://github.com/MrOtherGuy/firefox-csshacks/blob/master/chrome/autohide_tabstoolbar_v2.css)

### 11.22

#### dockeræ¸…ç†åƒåœ¾

```shell
docker system df -v # view detailed space info
docker container prune # remove stopped containers
docker image prune # remove all dangling images
docker image prune -a # remove all images without at least one container associated to them
```

### 11.20

#### ä½¿æ–‡ä»¶åªå…è®¸è¿½åŠ 

```shell
sudo chattr +a <file> # append only
```

#### WireGuardé…ç½®ç«¯å£è½¬å‘

åœ¨å¤–ç½‘æœåŠ¡å™¨ä¸Šé…ç½®ï¼š

```ini
[Interface]
# ... Other Configurations ...
PostUp = iptables -t nat -A PREROUTING -p tcp -m tcp --dport <outer_port> -j DNAT --to-destination <inner_ip>:<inner_port>
PostDown = iptables -t nat -D PREROUTING -p tcp -m tcp --dport <outer_port> -j DNAT --to-destination <inner_ip>:<inner_port>
```

#### dockerè®¿é—®å®¿ä¸»æœºæœåŠ¡

å¦‚æœæ˜¯`host`æ¨¡å¼ï¼Œç›´æ¥ä½¿ç”¨`127.0.0.1`

å¦‚æœæ˜¯`bridge`æ¨¡å¼ï¼Œä½¿ç”¨`172.17.0.1`

### 11.16

#### æ£€æµ‹å®¢æˆ·ç«¯è¿é€šæ€§

nmap:

```shell
nmap -6 -p <ç«¯å£å·> <IPv6åœ°å€>
nmap -p <ç«¯å£å·> <IPv4åœ°å€>
```

nc:

```shell
# TCP
nc -l <port> # server
nc <addr> <port> # client
# UDP
nc -u -l <port> # server
nc -u <addr> <port> # client
```

### 11.14

#### çº¯ipv6æœåŠ¡å™¨è®¿é—®ipv4

é…ç½®NAT64ï¼Œè®¾ç½®[å…¬å…±DNS64æœåŠ¡å™¨](https://nat64.net/)

### 11.10

#### Windowsæœ€é€Ÿæ¿€æ´»

```powershell
irm https://get.activated.win | iex
```

ï¼ˆèƒ½ç›´è¿ï¼Œä½†æ˜¯æ¯”è¾ƒæ…¢ï¼Œæœ€å¥½å¼€ä»£ç†ï¼‰

[ref](https://github.com/massgravel/Microsoft-Activation-Scripts)

#### éªŒè¯/etc/fstab

ä¿®æ”¹`/etc/fstab`åï¼Œä½¿ç”¨`sudo mount -a`éªŒè¯æ˜¯å¦ç¼–å†™æ­£ç¡®

### 11.3

#### bilibiliæ‰¹é‡å–æ¶ˆå…³æ³¨

[å…³æ³¨ç®¡ç†å™¨æ’ä»¶](https://greasyfork.org/zh-CN/scripts/428895-bilibili-%E5%85%B3%E6%B3%A8%E7%AE%A1%E7%90%86%E5%99%A8)

### 10.31

#### Linuxç¦ç”¨ä¼‘çœ 

`/etc/systemd/sleep.conf.d/disable-sleep.conf`:

```ini
[Sleep]
AllowSuspend=no
AllowHibernation=no
AllowHybridSleep=no
AllowSuspendThenHibernate=no
```

[ref](https://wiki.archlinux.org/title/Power_management/Suspend_and_hibernate#Disable_sleep_completely)

### 10.27

#### æŒ‚è½½nfs

**server**

åœ¨`/etc/exports`ä¸­é…ç½®ï¼š

```
/exported/directory 192.168.1.0/24(rw,sync)
```

ä½¿ç”¨`exportfs`å¯ç”¨ï¼š

```shell
sudo exportfs
```

**client**

æŒ‚è½½ï¼š

```shell
sudo mount -t nfs 192.168.1.1:/exported/directory /mount/point
```

#### æŒ‚è½½smbåè®®å…±äº«ç›®å½•

```shell
sudo apt install cifs-utils psmisc
sudo mount -t cifs -o username=$(whoami),uid=$(id -u),gid=$(id -g) //[server-ip]/[share-path] /[mount-point]
```

[ref](https://www.linode.com/docs/guides/linux-mount-smb-share/)

#### é‡ç½®ç»ˆç«¯å…‰æ ‡

æœ‰äº›ç¨‹åºä¼šéšè—å…‰æ ‡ï¼Œè€Œåœ¨é€€å‡ºæ—¶ä¸æ¢å¤ï¼Œå¯ä»¥æ‰‹åŠ¨é‡ç½®ï¼š

```shell
tput cnorm # reset cursor
echo -e "\e[?12l\e[?12h" # (optional) make cursor blink
```

### 10.26

#### æ²¹çŒ´è„šæœ¬è·å–èµ„æºè¢«CSPç­–ç•¥é˜»æ–­

è¿™ä¸ªç­–ç•¥æ˜¯ç”±è¢«æ³¨å…¥çš„ç½‘ç«™è®¾ç½®çš„ï¼Œå¯ä»¥é€šè¿‡å°†åŸæœ¬`XMLHttpRequest`çš„è°ƒç”¨æ›¿æ¢ä¸ºæ²¹çŒ´çš„`GM.xmlHttpRequest`æ¥ç»•è¿‡ã€‚

#### æ²¹çŒ´è„šæœ¬è·å–èµ„æºè¢«CORSç­–ç•¥é˜»æ–­

æœ‰æ—¶å¸Œæœ›åœ¨æ²¹çŒ´è„šæœ¬ä¸­è®¿é—®è‡ªå·±æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œè¢«æµè§ˆå™¨æ‹¦ä¸‹ï¼Œæç¤º`strict-origin-when-cross-origin`ã€‚éœ€è¦åœ¨è‡ªå·±çš„æœåŠ¡ä¸­é…ç½®CORSä¸­é—´ä»¶æˆ–è€…åœ¨Nginxä¸­é…ç½®ï¼š

```nginx
add_header 'Access-Control-Allow-Origin' '*';  # æ ¹æ®éœ€è¦è®¾ç½®ä¸ºå…·ä½“åŸŸå
add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';
add_header 'Access-Control-Allow-Headers' 'Origin, Content-Type, Accept, Authorization';
if ($request_method = 'OPTIONS') {
	add_header 'Access-Control-Allow-Origin' '*';
	add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';
	add_header 'Access-Control-Allow-Headers' 'Origin, Content-Type, Accept, Authorization';
	add_header 'Access-Control-Max-Age' 1728000;
	add_header 'Content-Length' 0;
	add_header 'Content-Type' 'text/plain charset=UTF-8';
	return 204;
}
```

#### gitå¼ºåˆ¶å¯ç”¨pager

æŸäº›æ—¶å€™å¦‚`git diff --exit-code`æ—¶ä¸ä¼šè°ƒç”¨pagerï¼Œä½¿å¾—`diff-so-fancy`æ²¡æœ‰è¢«è°ƒç”¨ã€‚

solution:

```shell
git --paginate diff --exit-code # force to paginate
```

#### dockerè¿›å…¥å®¹å™¨å‘½ä»¤è¡Œ

```shell
docker exec -it <container> bash
```

#### dockerç»‘å®šæŒ‚è½½æœ€ä½³å®è·µ

[ref](https://containerization-automation.readthedocs.io/zh-cn/latest/docker/storage/%5Bgosu%5D%E7%BB%91%E5%AE%9A%E6%8C%82%E8%BD%BD%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/)

### 10.25

#### FastAPI 422 Unprocessable Entity

[solution](https://github.com/fastapi/fastapi/discussions/6678)

```python
import logging
from fastapi import FastAPI, Request, status
from fastapi.exceptions import RequestValidationError
from fastapi.responses import JSONResponse

app = FastAPI()

@app.exception_handler(RequestValidationError)
async def validation_exception_handler(request: Request, exc: RequestValidationError):
	exc_str = f'{exc}'.replace('\n', ' ').replace('   ', ' ')
	logging.error(f"{request}: {exc_str}")
	content = {'status_code': 10422, 'message': exc_str, 'data': None}
	return JSONResponse(content=content, status_code=status.HTTP_422_UNPROCESSABLE_ENTITY)
```

#### Windowså®‰è£…ç¨‹åºä¸è®¤SSD

åœ¨BIOSä¸­å…³é—­VMDæŠ€æœ¯ï¼ˆVolume Management Deviceï¼‰

#### Windowsä¸‹WireGuard SSHä¸é€š

ç»æ’æŸ¥æ˜¯MTUé—®é¢˜å¯¼è‡´ä¸¢åŒ… [ref](https://www.cnblogs.com/waliwaliwa/p/7502997.html)

```powershell
netsh interface ipv4 show subinterfaces # check MTU configuration
netsh interface ipv4 set subinterface "wg0" mtu=1280 store=persistent # set MTU=1280
```

#### Windowsä¸‹WireGuardè¢«é˜²ç«å¢™é™åˆ¶

å°†wgç½‘ç»œè®¾ç½®ä¸ºä¸“ç”¨ç½‘ç»œï¼š

```powershell
sudo Set-NetConnectionProfile -Name wg0 -NetworkCategory Private
```

### 10.24

#### dockeræŒ‡å®šå®¹å™¨ä¸­hostname

```shell
docker run -h <hostname> ...
```

### 10.20

#### Word / WPSå®ç”¨åŠŸèƒ½

1. Continuous Format Painterï¼šé€‰ä¸­å†…å®¹ï¼Œå³é”®ï¼ŒFormat Painterå³ä¾§å°å›¾æ ‡
2. ä»…æ–‡æœ¬ç²˜è´´ï¼šCtrl+Alt+T
3. å…¬å¼æ ¼å¼ä¸è‡ªåŠ¨ç¼–å·ï¼š[solution](https://lizhening.github.io/posts/3f9c5367/)
4. å‚è€ƒæ–‡çŒ®è‡ªåŠ¨æŒ‰ç…§å‡ºç°å…ˆåç¼–å·ï¼š[solution](https://github.com/Casxt/SortReference)
5. æŸ¥æ‰¾æ›¿æ¢é€šé…ç¬¦åˆ—è¡¨ï¼š[ref](https://www.cnblogs.com/whchensir/p/5768030.html)

#### ä¼˜åŒ–git diff

ä½¿ç”¨[diff-so-fancy](https://github.com/so-fancy/diff-so-fancy)æ¥ç”Ÿæˆæ›´åŠ äººç±»å¯è¯»çš„å·®å¼‚ã€‚

```shell
sudo pacman -S diff-so-fancy
git config core.pager "diff-so-fancy | less --tabs=4 -RF" # optional: --global
git config interactive.diffFilter "diff-so-fancy --patch" # optional: --global
```

### 10.19

#### WPSç¼ºå­—ä½“

```shell
yay -S ttf-ms-win10-auto-zh_cn
sudo fc-cache -fv
```

è¿™ä¸ªåŒ…å¯ä»¥è§£å†³`SimSun`ç­‰å­—ä½“ï¼Œä½†å¦‚æœè¿˜å­˜åœ¨ç¼ºå¤±ï¼Œåˆ™éœ€è¦å¦å¤–å®‰è£…å…¶ä»–åŒ…å«çš„åŒ…ã€‚

### 10.18

#### WireGuardç”¨æˆ·ç©ºé—´å®ç°

å¦‚æœå†…æ ¸ä¸­æ²¡æœ‰wireguardæ¨¡å—ï¼Œåˆä¸ä¾¿ç¼–è¯‘å®‰è£…æ—¶ï¼Œå¯ä»¥ä½¿ç”¨[BoringTun](https://github.com/cloudflare/boringtun)

```shell
# make configurations in ~/wg as is kernelspace version
yay -S boringtun # or boringtun-git
sudo pacman -S wireguard-tools
sudo ln -s ~/wg/wg0.conf /etc/wireguard
sudo WG_QUICK_USERSPACE_IMPLEMENTATION=boringtun WG_SUDO=1 wg-quick up wg0
```

### 10.16

#### Kanataæ”¹é”®ä¿®æ­£Padé”®ç›˜

Padçš„é”®ç›˜Escapeå¤„æ˜¯XF86HomePageï¼Œè€Œä¸”æ²¡æœ‰Fné”ï¼Œä½¿ç”¨Kanataå°†å…¶é…ç½®ä¸ºæ­£å¸¸é”®ç›˜é”®ä½ [ref](https://github.com/jtroo/kanata/blob/main/docs/config.adoc)

```
(deflocalkeys-linux
	ğŸ”	217
)

(defsrc
	hmpg	ğŸ”…	ğŸ”†			ğŸ”	â—€â—€	â–¶â¸	â–¶â–¶	ğŸ”‡	ğŸ”‰	ğŸ”Š	powr
		F1	F2	F3	F4	F5	F6	F7	F8	F9	F10	F11	F12
	`	1	2	3	4	5	6	7	8	9	0
	lsft
	lctl	lalt	lmet	spc
)

(deflayer default
	esc	F1	F2			F5	F6	F7	F8	F9	F10	F11	F12
		ğŸ”…	ğŸ”†	F3	F4	F5	â—€â—€	â–¶â¸	â–¶â–¶	ğŸ”‡	ğŸ”‰	ğŸ”Š	F12
	`	1	2	3	4	5	6	7	8	9	0
	lsft
	lctl	lmet	lalt	spc
)

(defoverrides
	(AltLeft ShiftLeft 3) (F3)
	(ControlLeft Space) (F4)
)
```

### 10.12

#### pacmanæŸ¥è¯¢æŸä¸ªæ–‡ä»¶æ‰€å±çš„åŒ…

```shell
pacman -Qo <path>
```

#### å¤„ç†pacsaveå’Œpacnew

- pacsaveï¼šå¸è½½è½¯ä»¶åŒ…æ—¶æ£€æµ‹åˆ°é…ç½®æ–‡ä»¶æ›¾è¢«ä¿®æ”¹ï¼Œpacmanä¼šå°†å…¶å¤‡ä»½ä¸º.pacsaveæ–‡ä»¶
- pacnewï¼šæ›´æ–°è½¯ä»¶åŒ…æ—¶æ£€æµ‹åˆ°é…ç½®æ–‡ä»¶æ›¾è¢«ä¿®æ”¹ï¼Œpacmanä¼šå°†æ›´æ–°çš„é…ç½®æ–‡ä»¶ä¿å­˜ä¸º.pacnewæ–‡ä»¶ï¼Œå¹¶ç»™å‡ºè­¦å‘Š
- pacdiffï¼šå¯ç”¨äºæ£€ç´¢pacsave/pacnewæ–‡ä»¶å¹¶è¿›è¡Œäº¤äº’å¼å¤„ç†

#### vimåˆ†å±æ“ä½œ

```shell
Ctrl+w + v / :vs <file> # å‚ç›´åˆ†å±ï¼ˆå·¦å³åˆ†ï¼‰
Ctrl+w + s / :sp <file> # æ°´å¹³åˆ†å±ï¼ˆä¸Šä¸‹åˆ†ï¼‰
Ctrl+w + k/j/h/l # å‘ä¸Š/ä¸‹/å·¦/å³åˆ‡æ¢
Ctrl+w + +/-/>/< # å¢å¤§é«˜åº¦/å‡å°é«˜åº¦/å¢å¤§å®½åº¦/å‡å°å®½åº¦
```

### 10.11

#### WiFiä¿¡å·ç›¸å…³å‘½ä»¤

```shell
iw reg get # æŸ¥è¯¢æ— çº¿ç›‘ç®¡åŸŸç›¸å…³ä¿¡æ¯
sudo iw reg set CN # è®¾ç½®æ— çº¿ç›‘ç®¡åŸŸä¸ºCN
nmcli device wifi # æŸ¥è¯¢é¢‘é“å’Œå¸¦å®½ç­‰ä¿¡æ¯
```

#### CPU Benchmark

```shell
sudo pacman -S sysbench
sysbench cpu run --threads=1 --time=20
sysbench cpu run --threads=8 --time=20

yay -S geekbench # for x86_64
geekbench

wget https://cdn.geekbench.com/Geekbench-6.3.0-LinuxARMPreview.tar.gz # for ARM64
```

### 10.6

#### Firefox AI Chatbot è‡ªå®šä¹‰

Firefoxå¼•å…¥äº†AIä¾§è¾¹æ çš„å®éªŒæ€§åŠŸèƒ½ï¼Œé€šè¿‡ä¿®æ”¹é«˜çº§é…ç½®å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ï¼š

è¿›å…¥`about:config`ï¼Œæ‰¾åˆ°`browser.ml.chat.provider`ï¼Œä¿®æ”¹ä¸ºè‡ªå®šä¹‰çš„æœåŠ¡å³å¯ï¼Œå¦‚`https://chatgpt.com/?temporary-chat=true&model=gpt-4o-mini`

### 10.5

#### rofi-bluetoothæ­£ç¡®å¤„ç†é¢œè‰²è½¬ä¹‰å­—ç¬¦

[rofi-bluetooth](https://github.com/nickclyde/rofi-bluetooth)å¾ˆä¹…æ²¡æœ‰æ›´æ–°ï¼Œæ²¡æœ‰æ­£ç¡®å¤„ç†bluetoothctlè¾“å‡ºä¸­çš„ç»ˆç«¯é¢œè‰²æ§åˆ¶å­—ç¬¦ï¼Œè€Œbluetoothctlæ²¡æœ‰æä¾›å…³é—­å½©è‰²è¾“å‡ºçš„é€‰é¡¹ã€‚

solution: ä¿®æ”¹rofi-bluetoothä»£ç ï¼Œå¯¹è½¬ä¹‰å­—ç¬¦è¿›è¡Œè¿‡æ»¤

```shell
devices=$(bluetoothctl devices | grep Device | cut -d ' ' -f 3- | sed 's/\x1b\[[0-9;]*m//g') # æ–°å¢sedå‘½ä»¤éƒ¨åˆ†
```

### 10.4

#### flatpakåº”ç”¨è®¾ç½®ç¯å¢ƒå˜é‡

```shell
flatpak override --env=ENV1=VALUE1 com.name.package
```

### 10.1

#### OpenWrtå…¬é’¥ç™»å½•

å…¶ä½¿ç”¨çš„ssh serverä¸ºDropbearï¼Œå› æ­¤éœ€è¦å°†å…¬é’¥æ”¾ç½®åœ¨`/etc/dropbear/authorized_keys`

### 9.30

#### duå¿½ç•¥å…¶ä»–æ–‡ä»¶ç³»ç»Ÿ

```shell
du -x ...
```

### 9.29

#### SSH over HTTPS

```nginx
stream {
    # dispatch according to server_name
    map $ssl_preread_server_name $backend {
        ssh.example.com 127.0.0.1:22;
        default 127.0.0.1:443;
    }

    server {
        listen 443 ssl;
        ssl_preread on;

        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers HIGH:!aNULL:!MD5;

        proxy_pass $backend;

        include /etc/nginx/ssl_common.conf;
    }
}
```

### 9.28

#### NextTract

```shell
curl nxtrace.org/nt | bash
```

#### Nginxåå‘ä»£ç†WebSocketæœåŠ¡

ä¸»è¦æ˜¯éœ€è¦è‡ªåŠ¨å‡çº§`HTTP/1.1`ä»¥æ”¯æŒ`websocket`

```nginx
http {
    server {
        listen 8020;
        server_name your_domain.com;
        
        location / {
            proxy_pass http://your_websocket_backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            # for websocket
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
        }
    }
}
```

#### dockeré…ç½®ä»£ç†

`/etc/docker/daemon.json`:

```json
{
    "proxies": {
        "http-proxy": "http://127.0.0.1:7890",
        "https-proxy": "http://127.0.0.1:7890",
        "no-proxy": "localhost,127.0.0.0/8"
    }
}
```

### 7zå¸¸ç”¨å‘½ä»¤

```shell
7z a <options> <target> <source...> # å‹ç¼©
<options>:
	-mx=9 # å‹ç¼©çº§åˆ«
	-tzip # æŒ‡å®šzipæ ¼å¼ï¼ˆé»˜è®¤7z)
	-mmt=4 # æŒ‡å®šçº¿ç¨‹æ•°ï¼ˆé»˜è®¤32ï¼‰

7z x <target> # è§£å‹ï¼Œæ”¯æŒ7z zip rarç­‰
7z l <target> # åˆ—å‡ºå½’æ¡£å†…å®¹
7z t <target> # æµ‹è¯•å®Œæ•´æ€§
```

### 9.27

#### TampermonkeyåŠ è½½jQuery

```javascript
// @require      https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js
```

### 9.25

#### ä½¿ç”¨i3lock-fancyæ—¶xautolockä¸å·¥ä½œ

ç»è¿‡æ’æŸ¥æ˜¯å› ä¸º`xautolock`åœ¨è°ƒç”¨`locker`æ—¶ä¼šå…³é—­å…¶æ ‡å‡†è¾“å‡ºå¯¼è‡´`locker`è¿›ç¨‹å¼‚å¸¸é€€å‡ºã€‚

`xautolock` man pageï¼š

```plain
By default xautolock closes stdout and stderr. This prevents the locker from writing error messages to these files in case you manually lock your display.  The -nocloseout, -nocloseerr and -noclose options cause xautolock to not close stdout and/or stderr. On some platforms users of xnlock will need to use -nocloseout, in order to make xnlock's witty sayings show up. These options can also be used for debugging cases in which locker invocation is not successful.
```

solution:

```shell
xautolock -time 10 -locker i3lock-fancy -nocloseout
```

### 9.22

#### watchå¸¦æœ‰ç®¡é“çš„å‘½ä»¤

```shell
watch 'cmd1 | cmd2 | cmd3'
```

### 9.15

#### shellè·å–ç»å¯¹è·¯å¾„

```shell
realpath <target>
```

### 9.12

#### pingæŒ‡å®šåŒ…é•¿

```shell
ping <host> -s <size>
```

### 9.8

#### SSHæ— æ³•è¿é€šæ—¶å¿«é€Ÿå¤±è´¥

è®¾ç½®ConnectTimeouté€‰é¡¹

```shell
ssh <host> -o ConnectTimeout=1 # 1ç§’
```

#### ä¾¿æ·ç®¡ç†è¿œç«¯clash-core

```shell
# åœ¨æœ¬æœºå¯åŠ¨yacd
docker run -p <port>:80 -d --name yacd --rm ghcr.io/haishanh/yacd:master
# å°†è¿œç¨‹ä¸»æœºä¸Šclash-coreçš„external-controllerç«¯å£è½¬å‘åˆ°æœ¬åœ°
ssh -L <ctrl_port>:127.0.0.1:<ctrl_port> dasc_llm -vNT
```

éšååœ¨æµè§ˆå™¨ä¸­è®¿é—®`localhost:<port>`è¿›å…¥yacdï¼Œå¹¶å¡«å†™API Base URLä¸º`http://localhost:<ctrl_port>`ã€‚

### 9.6

#### wgetæ–­ç‚¹ç»­ä¼ 

`wget ... -c`

### 9.5

#### æŸ¥æ‰¾å­—ä½“è§„èŒƒåç§°

```shell
fc-list
# eg. /usr/share/fonts/noto/NotoSansMono-Regular.ttf: Noto Sans Mono:style=Regular
# ==> Noto Sans Mono:style=Regular
```

### 9.3

#### è®¾ç½®çª—å£é€æ˜åº¦

```shell
xprop -id <window_id> -f _NET_WM_WINDOW_OPACITY 32c -set _NET_WM_WINDOW_OPACITY <opacity>
```

å…¶ä¸­`window_id`å¯ä»¥é€šè¿‡`wmctrl -l`è·å¾—ï¼Œ`opacity`ä¸ºæ•´æ•°ï¼Œ`0`è¡¨ç¤ºä¸é€æ˜ï¼Œ`0xffffffff`è¡¨ç¤ºå®Œå…¨é€æ˜ã€‚

### 8.30

#### GPGç­¾ågit commit

[source](https://blog.puckwang.com/posts/2019/sign_git_commit_with_gpg/)

```shell
gpg --list-secret-keys # åˆ—å‡ºå¯†é’¥

gpg --full-generate-key # ç”Ÿæˆå¯†é’¥ï¼ˆäº¤äº’å¼ï¼‰

gpg --armor --export <Fingerprint> # ç”Ÿæˆå…¬é’¥
# åœ¨æ‰˜ç®¡å¹³å°æ·»åŠ å…¬é’¥

git config --global user.signingkey <Fingerprint> # é…ç½®ç­¾åå…¬é’¥
git commit -S -m ... # æäº¤æ—¶ç­¾å
git config --global commit.gpgsign true # æäº¤æ—¶é»˜è®¤ç­¾å
```

#### sshç»™AURæŠ•ç¥¨

```shell
ssh aur@aur.archlinux.org vote package_name
```

### 8.28

#### LiteLoaderQQNTåœ¨QQæ›´æ–°åå¤±æ•ˆ

æ˜¯å› ä¸ºå¯åŠ¨ä»£ç è¢«è¦†ç›–ï¼Œé‡æ–°å®‰è£…å³å¯

```shell
yay -S liteloader-qqnt-bin
# :: Running post-transaction hooks...
# (1/1) Patch QQ for LiteLoaderQQNT
```

#### è·¨å¹³å°ä¹…åæé†’å·¥å…·

[Stretchly](https://github.com/hovancik/stretchly)

### 8.26

#### é…ç½®æ²¹çŒ´è„šæœ¬è‡ªåŠ¨æ›´æ–°

åœ¨è„šæœ¬å¤´éƒ¨æ–°å¢`@updateURL`å’Œ`@downloadURL`å­—æ®µï¼Œå‰è€…æä¾›å…ƒä¿¡æ¯ç”¨äºè·å–ç‰ˆæœ¬å·ï¼Œä½¿å¾—æ²¹çŒ´æ’ä»¶å¯ä»¥åˆ¤æ–­è„šæœ¬æ˜¯å¦æ›´æ–°ï¼Œåè€…æä¾›è„šæœ¬å®Œæ•´ä»£ç ã€‚

ï¼ˆæ³¨æ„é“¾æ¥æœ€åçš„è„šæœ¬åæ˜¯å¯ä»¥éšä¾¿å†™çš„ï¼Œä¸å½±å“è¿”å›å†…å®¹ [source](https://greasyfork.org/en/discussions/greasyfork/247229-changes-to-the-downloadurl-and-updateurl)ï¼‰

```js
// @downloadURL  https://update.greasyfork.org/scripts/<script_id>/<script_name>.user.js
// @updateURL    https://update.greasyfork.org/scripts/<script_id>/<script_name>.user.js
```

### 8.22

#### ImageMagickå‹ç¼©å›¾ç‰‡

```shell
magick -quality 75 <from.png> <to.jpg> # 75 out of 100
```

### 8.20

#### yayç¦ç”¨check

```shell
yay -S <pkg> --mflags "--nocheck"
```

### 8.8

#### oh-my-zsh Cheet Sheet

[source](https://blog.praveen.science/oh-my-zsh-cheat-sheet/)

#### oh-my-zshå¿«æ·cd

```shell
d # display the dir stack
1~9 # cd to the corresponding dir
```

### 8.7

#### fcitxç¯å¢ƒå˜é‡æœ€ä½³é…ç½®

[source](https://wiki.archlinuxcn.org/wiki/Fcitx5#X11)

`/etc/environment`:

```
GTK_IM_MODULE=fcitx
QT_IM_MODULE=fcitx
XMODIFIERS=@im=fcitx
SDL_IM_MODULE=fcitx
GLFW_IM_MODULE=ibus
```

### 8.2

#### ç¦ç”¨æŸäº›cpuæ ¸

```shell
cpupower-gui offline [LIST OF CPUS] # eg. 0,1,2,11,13
```

### 8.1

#### å®‰å“è™šæ‹Ÿä½ç½®

[solution](https://github.com/Lerist/FakeLocation)

æœ‰æ²¡æœ‰ROOTéƒ½å¯ä»¥ï¼Œæœ‰ROOTæ”¯æŒåŸºç«™æ¨¡æ‹Ÿ

#### scpé™é€Ÿ

```sell
scp -l <limit> ... # å‚æ•°å•ä½ä¸ºKb/sï¼Œæ‰€ä»¥æ³¨æ„ä¹˜ä»¥8
```

### 7.29

#### ext4åˆ†åŒºåœ¨çº¿æ‰©å®¹

[source](https://serverfault.com/questions/509468/how-to-extend-an-ext4-partition-and-filesystem)

### 7.28

#### æ£€ç´¢æ‰‹å†Œ

`apropos <key-word>`

#### web serveré˜²æ­¢.gitæ–‡ä»¶å¤¹æš´éœ²

```nginx
location ~ /\.git { # éœ€è¦æ”¾åœ¨å…¶ä»–locationå—ä¹‹å‰
    deny all;
}
```

### 7.26

#### æµ‹è¯•sshè¿æ¥è´¨é‡

```shell
yay -S sshping
sshping <host>
```

### 7.22

#### sshè¿æ¥å¤ç”¨

æœ‰æ—¶æœåŠ¡å™¨åªå…è®¸å¯†ç ç™»å½•ï¼Œä½†é‡å¤è¾“å…¥å¯†ç æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥é…ç½®è¿æ¥å¤ç”¨å®ç°çŸ­æ—¶é—´å†…åªç”¨é‡æ–°è¾“å…¥ä¸€æ¬¡å¯†ç ã€‚

`~/.ssh/config`:

```
Host <host>
    <...>
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 600 # keep 600s
```

### 7.20

#### md5æ‰¹é‡æ ¡éªŒ

```shell
md5sum * > checklist.chk
md5sum -c checklist.chk
```

### 7.19

#### å¿«é€Ÿä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨

å¦‚æœæœ¬æœºåˆ°æœåŠ¡å™¨çš„è¿æ¥å¸¦å®½å—é™ï¼Œä½†æœ¬æœºå’ŒæœåŠ¡å™¨éƒ½æœ‰è¾ƒé«˜çš„å…¬ç½‘å¸¦å®½ï¼Œå¯ä»¥å€ŸåŠ©ä¸­è½¬ç«™å¿«é€Ÿä¼ æ–‡ä»¶ã€‚ä¾‹å¦‚[SwissTransfer](https://www.swisstransfer.com) [CowTransfer](https://cowtransfer.com)

ä¸‹è½½é“¾æ¥æ— æ³•ç›´æ¥wgetï¼ˆ403 forbiddenï¼‰ï¼Œå¯ä»¥å…ˆåœ¨æœ¬æœºæµè§ˆå™¨æ‰¾åˆ°ä»»æ„ä¸€ä¸ªå¸¸è§„è¯·æ±‚ï¼Œæ‹·è´å¯¹åº”çš„CURLå‘½ä»¤ï¼Œç„¶åå°†ä¸‹è½½é“¾æ¥æ›¿æ¢è¿›å»ã€‚

```shell
curl --output a.zip <raw-download-link> -H ... -H ...
```

### 7.15

#### æ— rootæƒé™ä½¿ç”¨PyEnv

ç”±äºpyenvæœ‰ä¸€äº›æ„å»ºä¾èµ–ï¼Œæ— rootæ—¶`pyenv install`ä¼šé­é‡`Build Fail`ã€‚

è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨condaè¿›è¡Œlocal installï¼Œåˆ›å»ºè™šæ‹Ÿç¯å¢ƒç»™pyenvç”¨ã€‚

```shell
conda create -n py310 python=3.10
conda activate py310

cd .pyenv/versions
python -m venv py310

pyenv virtualenv py310 new_env
pyenv shell new_env
# new_env is like a normal pyenv virtual environment
# but py310 can not be used directly
```

#### æ— rootæƒé™å®‰è£…zsh

[solution](https://gist.github.com/ZhaofengWu/f345652e994e3b68c309352a7610460f)

```shell
export PREFIX=$HOME/.local

# OPTIONAL: zsh will not install without ncurses. IF your machine doesn't have ncurses, you need to install it first.
export CXXFLAGS=" -fPIC" CFLAGS=" -fPIC" CPPFLAGS="-I${PREFIX}/include" LDFLAGS="-L${PREFIX}/lib"
wget https://ftp.gnu.org/pub/gnu/ncurses/ncurses-6.2.tar.gz
tar -xzvf ncurses-6.2.tar.gz
cd ncurses-6.2
./configure --prefix=$PREFIX --enable-shared
make
make install
cd .. # && rm ncurses-6.2.tar.gz && rm -r ncurses-6.2

# install zsh itself
wget -O zsh.tar.xz https://sourceforge.net/projects/zsh/files/latest/download
mkdir zsh && unxz zsh.tar.xz && tar -xvf zsh.tar -C zsh --strip-components 1
cd zsh
./configure --prefix=$PREFIX
make
make install
cd .. # && rm zsh.tar && rm -r zsh
echo -e "export SHELL=\$HOME/.local/bin/zsh\nexec \$SHELL -l" >> ~/.bash_profile # or chsh

# OPTIONAL: install oh-my-zsh
sh -c "$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)"
```

### 6.18

#### æ›´æ–°PyEnv

```shell
pyenv update
```

### 6.12

#### sudoå¸¸ç”¨é€‰é¡¹

```shell
sudo -u user # æŒ‡å®šç”¨æˆ·
sudo -E # ä¿ç•™ç¯å¢ƒå˜é‡
```

### 6.10

#### ç«¯å£æ‰«æ

```shell
nmap -sT <target> # TCP connectæ‰«æ
sudo nmap -sS <target> # SYNæ‰«æ
```

### 6.8

#### æ‰“æ–­pacmanå®‰è£…å¯¼è‡´ç³»ç»ŸæŸåçš„æ¢å¤æ–¹æ³•

`pacman -Syu`è¿‡ç¨‹ä¸­å¡æ­»ï¼Œåªå¥½å¼ºåˆ¶é‡å¯ï¼Œé‡å¯åå‡ºç°Kernel Panicã€‚ç»æ’æŸ¥ï¼Œå‘ç°æ˜¯å®‰è£…æ›´æ–°æ—¶é¦–å…ˆä¼šåˆ é™¤è¢«æ›´æ–°çš„æ–‡ä»¶å…¨éƒ¨å†…å®¹ï¼ˆå˜ä¸ºç©ºæ–‡ä»¶ï¼‰ï¼Œç„¶åå†ç»Ÿä¸€å†™å…¥æ–°æ–‡ä»¶å†…å®¹ï¼Œæ­¤æ—¶æ‰“æ–­å¯¼è‡´å¤§é‡å…³é”®æ–‡ä»¶ç¼ºå¤±ï¼ˆå¦‚libc.soï¼‰ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹å¹¿ä¸ºæµä¼ çš„ `chroot`+é‡æ–°å®‰è£… æ–¹æ¡ˆä¸èƒ½è§£å†³é—®é¢˜ï¼Œæ‰§è¡Œ`chroot`æ—¶ä¼šå‡ºç°`chroot: failed to run command '/bin/bash': Input/output error`ã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡å¤–éƒ¨`pacman`ç›´æ¥å‘æŒ‚è½½çš„guestæ ¹ç›®å½•ä¸­å®‰è£…ã€‚

solution:

```shell
# Boot into an installation media
sudo mount /dev/nvme0n1p8 /mnt
sudo pacman -Syy
sudo pacman --root=/mnt --cachedir=/mnt/var/cache/pacman/pkg -S $(pacman --root=/mnt -Qnq) # re-install all installed packages
```

æœŸé—´å¯èƒ½ä¼šé‡åˆ°GPGç­¾åéªŒè¯ä¸é€šè¿‡çš„æƒ…å†µï¼Œå¯ä»¥é€šè¿‡å®‰è£…`manjaro-keyring`æˆ–æ‰‹åŠ¨å¯¼å…¥å¯†é’¥è§£å†³ã€‚

ç”±äºä¸æ˜¯åœ¨å½“å‰ç³»ç»Ÿä¸­æ‰§è¡Œå®‰è£…ï¼Œå¾ˆå¤š`post-hook`ä¹‹ç±»çš„ä¼šæ‰§è¡Œå¤±è´¥ï¼Œä½†æ˜¯æ²¡æœ‰å…³ç³»ï¼Œä¸å½±å“ä¿®å¤æ–‡ä»¶ã€‚å®‰è£…å®Œæ¯•åé‡å¯å‘ç°å¯ä»¥è¿›å…¥ç³»ç»Ÿï¼Œä½†æ˜¯ä¸€äº›ç³»ç»Ÿç»„ä»¶æ²¡æœ‰æ­£å¸¸å·¥ä½œï¼ˆä¾‹å¦‚ç”±`dkms`ç®¡ç†çš„æ˜¾å¡é©±åŠ¨ï¼‰ã€‚æ­¤æ—¶éœ€è¦é‡æ–°å†å®‰è£…ä¸€æ¬¡ï¼Œä»¥ä¾¿æ­£ç¡®æ‰§è¡Œ`post-hook`ã€‚

```shell
sudo pacman -Syy
sudo pacman -S $(pacman -Qnq)
```

### 6.7

#### Windows OpenSSH æ›´æ”¹ç™»å½•SHELLä¸ºPowerShell

ç¼–è¾‘`C:\ProgramData\ssh\sshd_config`ï¼Œåœ¨æœ«å°¾æ·»åŠ ï¼š

```
Match User <your_username>
   ForceCommand powershell.exe -NoLogo -NoProfile
```

é‡å¯sshdæœåŠ¡ï¼š

```powershell
Restart-Service sshd
```

### 5.23

#### gdbæ‰“å°ipåœ°å€

```c
(gdb) p (char*)inet_ntoa(*(uint32_t*)ip_hdr->dst_ip)
```

#### ssh port forwardingè½¬å‘HTTPSæœåŠ¡

```shell
ssh -vNT -L 4433:example.com:443 <host>
```

ä¿®æ”¹`/etc/hosts`ï¼š

```
127.0.0.1 example.com
```

äºæ˜¯æµè§ˆå™¨å¯ä»¥è®¿é—®https://example.com:4433

#### pyenvä½¿ç”¨ç³»ç»ŸåŒ…ç®¡ç†å™¨å®‰è£…çš„åŒ…

èµ·å› ï¼š`graph-tool`åªèƒ½ä½¿ç”¨condaæˆ–åŒ…ç®¡ç†å™¨ç³»ç»Ÿçº§å®‰è£…ï¼Œpipæ— æ³•å®‰è£…

[solution](https://stackoverflow.com/questions/55600132/installing-local-packages-with-python-virtualenv-system-site-packages)

```shell
pyenv virtualenv system venv # use system-wide python version
vim ~/.pyenv/versions/cc_system/cc_system/pyvenv.cfg # EDIT: include-system-site-packages = true
```

### 5.19

#### Linuxå’ŒWindowsä¹‹é—´è¿œç¨‹åŒæ­¥æ–‡ä»¶æ–¹æ¡ˆ

1. åœ¨Windowsç«¯é…ç½®`Openssh Server`
2. ä½¿ç”¨`sshfs`å°†Windowsç«¯çš„ç›®æ ‡æ–‡ä»¶å¤¹æŒ‚è½½åˆ°Linuxç«¯
3. ä½¿ç”¨åŸºäº`rsync`çš„å¸¸è§„æ–‡ä»¶åŒæ­¥å·¥ä½œæµï¼Œå¿½ç•¥æ–‡ä»¶ç³»ç»Ÿå¯¼è‡´çš„é—®é¢˜`rsync --no-owner --no-perms --no-group ...`

#### wingetå¸¸ç”¨å‘½ä»¤

```powershell
winget source remove winget
winget source add winget https://mirrors.ustc.edu.cn/winget-source

winget search 7zip
winget show --id 7zip.7zip
winget install --id 7zip.7zip
winget upgrade --id 7zip.7zip
winget uninstall --id 7zip.7zip
```

#### Windowsé…ç½®ssh server

å…ˆå¯ç”¨`Openssh Server`åº”ç”¨ç»„ä»¶åŠæœåŠ¡

å¦‚æœæ˜¯ç®¡ç†å‘˜ç”¨æˆ·ï¼Œå…¬é’¥ä¸èƒ½æ”¾åœ¨`%HOME%`ï¼š[solution](https://learn.microsoft.com/en-us/windows-server/administration/openssh/openssh_keymanagement#administrative-user)

### 5.16

#### å¿«é€Ÿæ¸…ç†æ—§æ–‡ä»¶

```shell
# only work in zsh
mv path/to/*(.m+30) target/path # move all files with mtime before 30 days
mv path/to/*(/m+30) target/path # for folders
```

### 5.11

#### convertå¸¸è§ç”¨æ³•

```shell
convert path/to/input_image.jpg path/to/output_image.png
convert path/to/input_image.png -resize 640x480 path/to/output_image.png
convert path/to/image1.png path/to/image2.png ... -delay 10 path/to/animation.gif # delay 100ms
```

### 5.10

#### é…ç½®å¤šç½‘å¡åæ— æ³•ä¸Šç½‘

```shell
ip route # æŸ¥çœ‹é»˜è®¤ç½‘å…³
ip route del default via 192.168.1.100 # åˆ é™¤ä¸æ­£ç¡®çš„ç½‘å…³
```

### 5.7

#### è§£é™¤Firefoxä¾§è¾¹æ å®½åº¦é™åˆ¶

[solution](https://superuser.com/questions/1276800/customize-the-maximum-width-of-the-firefox-sidebar)

### 5.6

#### ç½‘ç«™è‡ªå®šä¹‰å¿«æ·é”®

ä½¿ç”¨æ²¹çŒ´æ’å…¥è„šæœ¬

```javascript
window.addEventListener("keydown", function(e){
    if(e.altKey && e.key == "z"){
        document.getElementsByClassName("icon-shape-rect")[0].click();
    }
});
```

### 4.30

#### è°ƒè¯•Makefile

æ‰“å°è·Ÿè¸ªä¿¡æ¯ï¼š`make --trace`

æ‰“å°å…¨éƒ¨è°ƒè¯•ä¿¡æ¯ï¼š`make --debug=a`

### 4.2

#### å¤šçº¿ç¨‹åŠ é€Ÿapt

[apt-fast](https://github.com/ilikenwf/apt-fast)

#### å¤šæ ¸åŠ é€Ÿpip build wheel

```shell
MAKEFLAGS="-j`nproc`" pip install ...
```

### 3.27

#### æ™®é€šç”¨æˆ·è‡ªå®šä¹‰å®‰è£…CUDA Toolkit

å½“éœ€è¦çš„CUDAç‰ˆæœ¬å’Œå…¨å±€å®‰è£…çš„ä¸ä¸€è‡´ï¼Œåˆä¸æƒ³å½±å“å…¨å±€ç¯å¢ƒ

```shell
wget https://developer.download.nvidia.com/compute/cuda/12.4.0/local_installers/cuda_12.4.0_550.54.14_linux.run # ä» https://developer.nvidia.com/cuda-downloads é€‰æ‹©åˆé€‚ç‰ˆæœ¬çš„runfile
export TARGET_PATH=<custom installation path>
bash cuda_12.4.0_550.54.14_linux.run --toolkit --toolkitpath=$TARGET_PATH

# ç¼–è¾‘ .zshrc
alias cuda12_enable="export LD_LIBRARY_PATH=$TARGET_PATH/lib64:$LD_LIBRARY_PATH; export PATH=$TARGET_PATH/bin:$PATH"
```

[source](https://github.com/pyg-team/pytorch_geometric/issues/392#issuecomment-503335625)

#### pip installè‡ªå®šä¹‰ä¸´æ—¶ç¼“å­˜

å½“`/tmp`ç©ºé—´ä¸è¶³æ—¶ï¼Œpipæ— æ³•è¿›è¡Œå®‰è£…ï¼Œè‡ªå®šä¹‰ç¼“å­˜è·¯å¾„å³å¯

```shell
TMPDIR=/path/to/tmp pip install --cache-dir=$TMPDIR ...
```

### 3.26

#### å…è®¸ç”¨æˆ·è®¾ç½®ä½nice

`/etc/security/limits.conf`

```
username            -       nice            -20
```

éœ€è¦é‡æ–°ç™»å½•ç”¨æˆ·ï¼Œ`ulimit -a`æ£€æŸ¥æ˜¯å¦è®¾ç½®æˆåŠŸ

### 3.1

#### dockeræ¸…ç†æ— ç”¨å®¹å™¨

```shell
docker rm -v $(docker ps --filter status=exited -q)
```

### 2.24

#### ipynbå¯¼å‡ºåˆ°pyæ–‡ä»¶

```shell
pip install nbconvert
jupyter nbconvert --to script <xxx.ipynb>
```

### 2.20

#### ipynbè·³è¿‡å•å…ƒæ ¼

```python
%%script true

<code to skip>
```

### 2.18

#### Pythonç±»å‹æ³¨è§£å…è®¸éšå¼Optional

`pyrightconfig.json`:

```json
{
    "strictParameterNoneValue": false
}
```

### 2.17

#### VMWareå’ŒLinux Memory Compactionçš„å†²çªé—®é¢˜

Linuxä½¿ç”¨Transparent HugePageæŠ€æœ¯æ¥æé«˜å†…å­˜æ•ˆç‡ï¼Œéœ€è¦å†…æ ¸çº¿ç¨‹`kcompactd`åœ¨åå°è¿›è¡Œå†…å­˜æ•´ç†ã€‚ä½†è¿™ä¸€è¿‡ç¨‹ä¼šå¯¼è‡´è™šæ‹Ÿæœºå‘¨æœŸæ€§å¡é¡¿ï¼Œå…³é—­æ­¤æŠ€æœ¯å³å¯ã€‚

è§£å†³æ–¹æ³•ï¼ˆrootä¸‹æ‰§è¡Œï¼Œé‡å¯åå¤±æ•ˆï¼‰ï¼š

```shell
echo never > /sys/kernel/mm/transparent_hugepage/enabled
echo never > /sys/kernel/mm/transparent_hugepage/defrag
```

[source](https://gist.github.com/2E0PGS/2560d054819843d1e6da76ae57378989)

### 2.5

#### èŠ‚çœyayå‹ç¼©è½¯ä»¶åŒ…æ—¶é—´

ä¿®æ”¹`~/.makepkg.conf`ä¸­çš„`PKGEXT=.pkg.tar.xz`ä¸º`PKGEXT=.pkg.tar`

å› ä¸ºä½¿ç”¨yayæ‰“åŒ…åä¸€èˆ¬æ˜¯ç«‹å³å®‰è£…ï¼Œè€Œä¸æ˜¯å‘å¸ƒï¼Œæ­¤è®¾ç½®å¯ä»¥èŠ‚çœxzå‹ç¼©ã€è§£å‹çš„è¿‡ç¨‹

[source](https://bbs.archlinux.org/viewtopic.php?id=167241)

### 1.30

#### dockerå®¹å™¨è®¿é—®å®¿ä¸»æœºä¸Šçš„æœåŠ¡

##### ä½¿ç”¨host.docker.internal

```shell
docker ... --add-host=host.docker.internal:host-gateway
```

```yaml
# docker-compose.yml
services:
  xxx:
  
  	...
    
    extra_hosts:
      - "host.docker.internal:host-gateway"
```

#### ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œ

ï¼ˆå¯èƒ½ä¸å®‰å…¨ï¼‰

```shell
docker ... --net=host
```

```yaml
# docker-compose.yml
services:
  xxx:
  
  	...
    
    network_mode: host
```

### 1.26

#### ç®€å•æ–¹ä¾¿çš„æ®µé”™è¯¯è¿½è¸ªæ‰‹æ®µlibSegFault.so

libSegFault.soç”±glibcæä¾›

```shell
LD_PRELOAD=/path/to/libSegFault.so ./the_program
```

### 1.23

#### rmé¿å…æ­§ä¹‰

å½“æ–‡ä»¶/æ–‡ä»¶å¤¹ä»¥`-`å¼€å¤´æ—¶

```shell
rm -rf -- -foo
```

#### éscpè¿œç¨‹æ‹·è´

```shell
ssh dd if=xxx | dd of=xxx
```

### 1.6

#### æ‰¹é‡æŸ¥æ‰¾

```shell
find ... | xargs cat | grep xxx
```

### 1.3

#### rsyncåŒæ­¥æ–‡ä»¶å¤¹

```shell
rsync -av --progress sourcefolder /destinationfolder --exclude thefoldertoexclude
```

`-n`: dry run

`--exclude`: ç›¸å¯¹äºsourcefolderï¼Œ å¯é‡å¤å¤šæ¬¡

#### å‘½ä»¤è¡Œå¯åŠ¨çƒ­ç‚¹

æœ€æ–°ä¸€æ¬¡æ»šåŒ…ä¹‹å`wihotspot-gui`ä¸èƒ½ä½¿ç”¨äº†ï¼Œçœ‹èµ·æ¥åƒæ˜¯gtkæ›´æ–°å¯¼è‡´ä¸å…¼å®¹ã€‚ä½†æ˜¯`create_ap`æ˜¯èƒ½æ­£å¸¸ä½¿ç”¨çš„

```shell
sudo create_ap wlo1 wlo1 '<ssid>' '<passphrase>' --freq-band 2.4
```

### 1.1

$\text{A Fresh Start !}$